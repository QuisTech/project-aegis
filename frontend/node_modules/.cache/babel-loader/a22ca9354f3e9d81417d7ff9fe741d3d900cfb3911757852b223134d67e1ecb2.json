{"ast":null,"code":"import axios from 'axios';\nconst API_BASE = 'http://localhost:5001/api';\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem('fusioncore_token');\n    this.user = JSON.parse(localStorage.getItem('fusioncore_user') || 'null');\n    if (this.token) {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${this.token}`;\n    }\n  }\n  async login(username, password) {\n    try {\n      const response = await axios.post(`${API_BASE}/auth/login`, {\n        username,\n        password\n      });\n      if (response.data.token) {\n        this.setAuth(response.data.token, response.data.user);\n        return {\n          success: true,\n          user: response.data.user\n        };\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      return {\n        success: false,\n        error: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Login failed'\n      };\n    }\n  }\n  setAuth(token, user) {\n    this.token = token;\n    this.user = user;\n    localStorage.setItem('fusioncore_token', token);\n    localStorage.setItem('fusioncore_user', JSON.stringify(user));\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  }\n  logout() {\n    this.token = null;\n    this.user = null;\n    localStorage.removeItem('fusioncore_token');\n    localStorage.removeItem('fusioncore_user');\n    delete axios.defaults.headers.common['Authorization'];\n  }\n  isAuthenticated() {\n    return !!this.token;\n  }\n  hasRole(role) {\n    return this.user && this.user.role === role;\n  }\n  hasAnyRole(roles) {\n    return this.user && roles.includes(this.user.role);\n  }\n  getUser() {\n    return this.user;\n  }\n}\nexport const authService = new AuthService();","map":{"version":3,"names":["axios","API_BASE","AuthService","constructor","token","localStorage","getItem","user","JSON","parse","defaults","headers","common","login","username","password","response","post","data","setAuth","success","error","_error$response","_error$response$data","setItem","stringify","logout","removeItem","isAuthenticated","hasRole","role","hasAnyRole","roles","includes","getUser","authService"],"sources":["C:/Users/Administrator/Downloads/project-aegis/src/services/auth.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE = 'http://localhost:5001/api';\r\n\r\nclass AuthService {\r\n  constructor() {\r\n    this.token = localStorage.getItem('fusioncore_token');\r\n    this.user = JSON.parse(localStorage.getItem('fusioncore_user') || 'null');\r\n    \r\n    if (this.token) {\r\n      axios.defaults.headers.common['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n  }\r\n\r\n  async login(username, password) {\r\n    try {\r\n      const response = await axios.post(`${API_BASE}/auth/login`, {\r\n        username,\r\n        password\r\n      });\r\n\r\n      if (response.data.token) {\r\n        this.setAuth(response.data.token, response.data.user);\r\n        return { success: true, user: response.data.user };\r\n      }\r\n    } catch (error) {\r\n      return { \r\n        success: false, \r\n        error: error.response?.data?.error || 'Login failed' \r\n      };\r\n    }\r\n  }\r\n\r\n  setAuth(token, user) {\r\n    this.token = token;\r\n    this.user = user;\r\n    localStorage.setItem('fusioncore_token', token);\r\n    localStorage.setItem('fusioncore_user', JSON.stringify(user));\r\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n  }\r\n\r\n  logout() {\r\n    this.token = null;\r\n    this.user = null;\r\n    localStorage.removeItem('fusioncore_token');\r\n    localStorage.removeItem('fusioncore_user');\r\n    delete axios.defaults.headers.common['Authorization'];\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return !!this.token;\r\n  }\r\n\r\n  hasRole(role) {\r\n    return this.user && this.user.role === role;\r\n  }\r\n\r\n  hasAnyRole(roles) {\r\n    return this.user && roles.includes(this.user.role);\r\n  }\r\n\r\n  getUser() {\r\n    return this.user;\r\n  }\r\n}\r\n\r\nexport const authService = new AuthService();\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAG,2BAA2B;AAE5C,MAAMC,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC;IACrD,IAAI,CAACC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,IAAI,MAAM,CAAC;IAEzE,IAAI,IAAI,CAACF,KAAK,EAAE;MACdJ,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAU,IAAI,CAACR,KAAK,EAAE;IACzE;EACF;EAEA,MAAMS,KAAKA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;IAC9B,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,IAAI,CAAC,GAAGhB,QAAQ,aAAa,EAAE;QAC1Da,QAAQ;QACRC;MACF,CAAC,CAAC;MAEF,IAAIC,QAAQ,CAACE,IAAI,CAACd,KAAK,EAAE;QACvB,IAAI,CAACe,OAAO,CAACH,QAAQ,CAACE,IAAI,CAACd,KAAK,EAAEY,QAAQ,CAACE,IAAI,CAACX,IAAI,CAAC;QACrD,OAAO;UAAEa,OAAO,EAAE,IAAI;UAAEb,IAAI,EAAES,QAAQ,CAACE,IAAI,CAACX;QAAK,CAAC;MACpD;IACF,CAAC,CAAC,OAAOc,KAAK,EAAE;MAAA,IAAAC,eAAA,EAAAC,oBAAA;MACd,OAAO;QACLH,OAAO,EAAE,KAAK;QACdC,KAAK,EAAE,EAAAC,eAAA,GAAAD,KAAK,CAACL,QAAQ,cAAAM,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBJ,IAAI,cAAAK,oBAAA,uBAApBA,oBAAA,CAAsBF,KAAK,KAAI;MACxC,CAAC;IACH;EACF;EAEAF,OAAOA,CAACf,KAAK,EAAEG,IAAI,EAAE;IACnB,IAAI,CAACH,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACG,IAAI,GAAGA,IAAI;IAChBF,YAAY,CAACmB,OAAO,CAAC,kBAAkB,EAAEpB,KAAK,CAAC;IAC/CC,YAAY,CAACmB,OAAO,CAAC,iBAAiB,EAAEhB,IAAI,CAACiB,SAAS,CAAClB,IAAI,CAAC,CAAC;IAC7DP,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUR,KAAK,EAAE;EACpE;EAEAsB,MAAMA,CAAA,EAAG;IACP,IAAI,CAACtB,KAAK,GAAG,IAAI;IACjB,IAAI,CAACG,IAAI,GAAG,IAAI;IAChBF,YAAY,CAACsB,UAAU,CAAC,kBAAkB,CAAC;IAC3CtB,YAAY,CAACsB,UAAU,CAAC,iBAAiB,CAAC;IAC1C,OAAO3B,KAAK,CAACU,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;EACvD;EAEAgB,eAAeA,CAAA,EAAG;IAChB,OAAO,CAAC,CAAC,IAAI,CAACxB,KAAK;EACrB;EAEAyB,OAAOA,CAACC,IAAI,EAAE;IACZ,OAAO,IAAI,CAACvB,IAAI,IAAI,IAAI,CAACA,IAAI,CAACuB,IAAI,KAAKA,IAAI;EAC7C;EAEAC,UAAUA,CAACC,KAAK,EAAE;IAChB,OAAO,IAAI,CAACzB,IAAI,IAAIyB,KAAK,CAACC,QAAQ,CAAC,IAAI,CAAC1B,IAAI,CAACuB,IAAI,CAAC;EACpD;EAEAI,OAAOA,CAAA,EAAG;IACR,OAAO,IAAI,CAAC3B,IAAI;EAClB;AACF;AAEA,OAAO,MAAM4B,WAAW,GAAG,IAAIjC,WAAW,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}