{"ast":null,"code":"import axios from'axios';const API_BASE='http://localhost:5001/api';class AuthService{constructor(){this.token=localStorage.getItem('fusioncore_token');this.user=JSON.parse(localStorage.getItem('fusioncore_user')||'null');if(this.token){axios.defaults.headers.common['Authorization']=\"Bearer \".concat(this.token);}}async login(username,password){try{const response=await axios.post(\"\".concat(API_BASE,\"/auth/login\"),{username,password});if(response.data.token){this.setAuth(response.data.token,response.data.user);return{success:true,user:response.data.user};}}catch(error){var _error$response,_error$response$data;return{success:false,error:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Login failed'};}}setAuth(token,user){this.token=token;this.user=user;localStorage.setItem('fusioncore_token',token);localStorage.setItem('fusioncore_user',JSON.stringify(user));axios.defaults.headers.common['Authorization']=\"Bearer \".concat(token);}logout(){this.token=null;this.user=null;localStorage.removeItem('fusioncore_token');localStorage.removeItem('fusioncore_user');delete axios.defaults.headers.common['Authorization'];}isAuthenticated(){return!!this.token;}hasRole(role){return this.user&&this.user.role===role;}hasAnyRole(roles){return this.user&&roles.includes(this.user.role);}getUser(){return this.user;}}export const authService=new AuthService();","map":{"version":3,"names":["axios","API_BASE","AuthService","constructor","token","localStorage","getItem","user","JSON","parse","defaults","headers","common","concat","login","username","password","response","post","data","setAuth","success","error","_error$response","_error$response$data","setItem","stringify","logout","removeItem","isAuthenticated","hasRole","role","hasAnyRole","roles","includes","getUser","authService"],"sources":["C:/Users/Administrator/Downloads/project-aegis/frontend/src/services/auth.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE = 'http://localhost:5001/api';\r\n\r\nclass AuthService {\r\n  constructor() {\r\n    this.token = localStorage.getItem('fusioncore_token');\r\n    this.user = JSON.parse(localStorage.getItem('fusioncore_user') || 'null');\r\n    \r\n    if (this.token) {\r\n      axios.defaults.headers.common['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n  }\r\n\r\n  async login(username, password) {\r\n    try {\r\n      const response = await axios.post(`${API_BASE}/auth/login`, {\r\n        username,\r\n        password\r\n      });\r\n\r\n      if (response.data.token) {\r\n        this.setAuth(response.data.token, response.data.user);\r\n        return { success: true, user: response.data.user };\r\n      }\r\n    } catch (error) {\r\n      return { \r\n        success: false, \r\n        error: error.response?.data?.error || 'Login failed' \r\n      };\r\n    }\r\n  }\r\n\r\n  setAuth(token, user) {\r\n    this.token = token;\r\n    this.user = user;\r\n    localStorage.setItem('fusioncore_token', token);\r\n    localStorage.setItem('fusioncore_user', JSON.stringify(user));\r\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n  }\r\n\r\n  logout() {\r\n    this.token = null;\r\n    this.user = null;\r\n    localStorage.removeItem('fusioncore_token');\r\n    localStorage.removeItem('fusioncore_user');\r\n    delete axios.defaults.headers.common['Authorization'];\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return !!this.token;\r\n  }\r\n\r\n  hasRole(role) {\r\n    return this.user && this.user.role === role;\r\n  }\r\n\r\n  hasAnyRole(roles) {\r\n    return this.user && roles.includes(this.user.role);\r\n  }\r\n\r\n  getUser() {\r\n    return this.user;\r\n  }\r\n}\r\n\r\nexport const authService = new AuthService();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}